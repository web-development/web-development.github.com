<!DOCTYPE html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 web-development"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7 web-development"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8 web-development"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9 web-development"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js web-development"> <!--<![endif]-->
<head> 

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Lehrbuch Web-Development - Formular und Javascript</title>
   
  <meta name="author" content="Brigitte Jellinek"> 
  <meta name="description" content="Ein Lehrbuch für das Informatik- oder Medieninformatik-Studium."> 

  <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
  <meta name="generator" content="nanoc 3.1.6">

  <link rel="shortcut icon" href="/assets/img/favicon.ico">

  <link rel="stylesheet" href="/assets/css/bootstrap.css?v=1">
  <link rel="stylesheet" href="/assets/css/prettify.css?v=1">
  <style>
    body {  padding-top: 90px; }
    article {  padding-top: 40px; }
    body, p, li, dt, dd {  
      font-size: 15px; 
      line-height: 1.5 ;
    }
  </style>

  <script src="/assets/js/jquery.js?v=1.7.1"></script>
  <script src="/assets/js/bootstrap.js?v=1"></script>
  <script src="/assets/js/prettify.js?v=1"></script>
  <script src="/assets/js/libs/modernizr-1.5.min.js?v=1"></script>

</head>
<body>

<div class="container">

  <header class="jumbotron sub-header">
      <h1><a href="/" title="Web Development">Web Development</a></h1>
      <p class="lead">Ein Lehrbuch für das Informatik oder Medien-Informatik Studium.</p>
  </header>
    



	<!-- body -->
	<article id="body" class="row">
		
		<div class="span8">
		
			
                          <div class="page-header">
				<h2 class="title">Formular und Javascript</h2>
                          </div>
			
			
			<p>Am Beispiel eines Formular werden wir nun einfaches Javascript kennen lernen. Die Details von Javascript werden in den nächsten Kaptieln, hier geht es nur um ein erstes Kennenlernen.</p>

<h2 id="javascript-einbetten">Javascript Einbetten</h2>
<p>Javascript kann innerhalb des &lt;script&gt;-Tags irgendwo in den HTML-Code eingefügt werden.</p>

<h1>Hallo Welt</h1>
<script>
      var pi,r,a;
      pi = 3.141;
      r = 2;
      a = r * r * pi;
</script>

<p>Ohne Output merkt man aber gar nichts davon: In Firefox kann man mit der Konsole von Firebug die Variablen auslesen wie in Abbildung 52 gezeigt.</p>

<p><img  alt="Abbildung 52: Mit firebug den Wert einzelnen Javascript-Variablen  auslesen" src="/images/image239.png" /></p>

<p>In Google Chrome gibt es ebenfalls eine Console wie in Abbildung gezeigt, das entsprechende Fenster wird geöffnet wenn Sie irgendwo in der Webseite mit der rechten Maustaste klicken, und „Element überprüfen“ auswählen:</p>

<p><img  alt="Abbildung 53: Mit Chrome den Wert einzelnen Javascript-Variablen  auslesen" src="/images/image240.png" /></p>

<h2 id="popup-fenster">Popup-Fenster</h2>
<p>Mit den Befehlen alert, confirm und prompt können Sie kleine Popup-Fenster öffnen:</p>

<script type="text/javascript">
alert("peng, du bist tot!");

var ja_nein = confirm("sollen die daten nicht gelöscht werden?");

var antwort = prompt("welche Daten sollen gelöscht werden. Keine Angabe löscht alles");

</script>

<p>Achtung: So können Sie zwar bei gutgläubigen Menschen Herzinfarkte auslösen, aber Sie können mit Javascript nicht wirklich Dateien löschen.</p>

<h2 id="formulare">Formulare</h2>

<p>Mit der Konsole von Firebug können Sie auch Formulare genauer untersuchen. Achtung! Wir geben ab jetzt allen Formular-Eingabefeldern nicht nur einen name, sondern auch eine id, das erleichtert die Handhabung in Javascript!</p>

<pre><code>  &lt;form method="get" action="mail.php"&gt; 
  &lt;label for="mail"&gt;E-Mail:
     &lt;input type="text" name="mail" id="mail" placeholder="e-mail adresse"&gt;
  &lt;/label&gt;
  &lt;label&gt;Hochschule:   
      &lt;input type="text" name="hochschule" id="hochschule" value="FH Salzburg"&gt; 
  &lt;/label&gt; 
  &lt;input type="submit" value="speichern"&gt;
  &lt;/form&gt;
</code></pre>

<p><img  alt="Abbildung 54: Mit Firebug Formulare und Eingabefelder auslesen" src="/images/image242.png" /></p>

<p>Mit document.getElementById kann man also das einen bestimmten Tag  ansprechen, wenn man die id kennt.</p>

<p>Jedes Eingabefeld bietet mit value den aktuell eingegeben Wert (als String) an, hier z.B. document.getElementById(“hochschule”).value.  Die letzten beiden Zeilen in der Konsole zeigen, dass es auch umgekehrt funktioniert: man kann auch Werte ins Eingabefeld hineinschreiben, der neue Werte wird sofort im Browser angezeigt.</p>

<h2 id="documentwrite">document.write</h2>

<p>Mit dem Befehl document.write() kann Text/Code in den HTML-Code eingefügt werden.</p>

<pre><code>  &lt;h1&gt;Hallo Welt&lt;/h1&gt;
  &lt;script&gt;
      document.write("&lt;p&gt;Hallo Javscript&lt;/p&gt;");
  &lt;/script&gt;
  &lt;p&gt;Hallo HTML&lt;/p&gt;
</code></pre>

<p>Der Browser interpretiert das Javascript und fügt das Ergebnis zu einem HTML-Dokument zusammen. Achtung: Dieses resultierende HTML-Dokument existiert nur im Haupt-Speicher des einen Computers auf dem der Browser gerade läuft, es wird nie abgespeichert! Mit Firebug kann man es aber sehen:</p>

<pre><code>  &lt;h1&gt;Hallo Welt&lt;/h1&gt;
  &lt;p&gt;Hallo Javscript&lt;/p&gt;
  &lt;p&gt;Hallo HTML&lt;/p&gt;
</code></pre>

<p>Ein Anwendungsbeispiel dieses Befehls: Ich will ein Dropdown-Menü mit vielen Einträgen, bin aber zu faul um alle &lt;option&gt;-Tags einzutippen.</p>

<pre><code>  &lt;form&gt;
     &lt;select name="Anzahl" id="Anzahl"&gt;
         &lt;option&gt;1&lt;/option&gt;
         &lt;option&gt;2&lt;/option&gt;
         &lt;option&gt;3&lt;/option&gt;
         &lt;option&gt;4&lt;/option&gt;
         &lt;option&gt;5&lt;/option&gt;
         &lt;option&gt;6&lt;/option&gt;
         &lt;option&gt;7&lt;/option&gt;

     &lt;/select&gt;
     &lt;input type="submit"&gt;
  &lt;/form&gt;
</code></pre>

<p>Ich ersetze also die option-Tags durch eine Schleife in Javascript:</p>

<pre><code>  &lt;form&gt;
     &lt;select name="Anzahl" id="Anzahl"&gt;
         &lt;script language="javascript"&gt;
            var i=0;
            while(i &lt;= 50) {
                document.write("&lt;option&gt;" + i + "&lt;/option&gt;");
                i++;
            }
         &lt;/script&gt;
     &lt;/select&gt;
     &lt;input type="submit"&gt;
  &lt;/form&gt;
</code></pre>

<p>Mit Ansicht -&gt; Quelltext sieht man den Javascript-Code, In Firebug sieht man das Ergebnis:</p>

<p>Sollte man diese Möglichkeit nutzen?  Der Nachteil: Falls Javascript nicht funktioniert, hat mein Eingabefeld keine Optionen. Deswegen wäre es wahrscheinlich besser, die Optionen als HTML anzugeben.</p>

<h2 id="ereignisse-und-ereignisgesteuerte-programmierung">Ereignisse und Ereignisgesteuerte Programmierung</h2>
<p>Javascript ist hauptsächlich eine Programmiersprache für das „Frontend“, für die Gestaltung von Benutzerschnittstellen. Für grafische Benutzerschnittstellen hat sich ein besonderer Programmierstil entwickelt: die ereignisgesteuerte Programmierung. Dieser Stil kommt auch in Actionscript (in Flash), in Visual Basic, u.s.w. zum Einsatz.</p>

<p>Dabei lösen Ereignis, die die BenutzerIn setzt, bestimmte Programmteile aus.</p>

<p>Im Webbrowser sind solche Ereignisse z.B.: </p>

<p>• Klicken auf einen Link
• Eintippen in ein Textfeld
• Anklicken einer Checkbox
• Absenden eines Formulares
Eine Liste von Events bzw. on-Attributen für HTML-Tags finden Sie z.B: in selfhtml9.</p>

<p>Ein Beispiel für ereignisgesteuerte Programmierung mit einem Web-Formular: Das Bestellformular für Bücher in Abbildung 55 soll automatisch den Gesamtpreis berechnen.</p>

<p><img  alt="Abbildung 55: Bestellformular für Bücher mit Berechnung" src="/images/image248.png" /></p>

<p>Wenn in ein Anzahl-Feld ein neuer Wert eingegeben wird soll dieser mit dem Preis multipliziert werden und in die rechte Spalte geschrieben werden. Betrachten wir zuerst diesen Schritt alleine an einem vereinfachten Formular mit einem Eingabefeld und einem span-tag für die Ausgabe</p>

<p><input value="0" name="in" />
<span id="out"></span>
Für die Formulierung „Wenn in das Feld in ein neuer Wert eingegeben wird, dann…“  gibt es ein passendes Event in HTML/Javascript: onchange. Die wird als Attribut in den HTML-Code des Eingabefeldes geschrieben:</p>

<p><input value="0" name="in" onchange="hier Javascript" />
<span id="out"></span> <br />
In das Attribut kann nun Javascript-Code eingefügt werden der die richtige Berechnung vornimmt und das Ergebnis in das richtige Element schreibt:</p>

<p><input value="0" name="in" onchange="document.getElementById('out').innerHTML = this.value * 100" />
<span id="out"></span> <br />
Betrachten wir die Javascript-Befehl im Detail: Es handelt sich um eine Zuweisung mit =.</p>

<p>Auf der rechten Seite der Zuweisung befindet sich die Variable „this“, diese verweist auf das Element, das das Event ausgelöst hat, in diesem Fall also das Eingabefeld. Mit this.value kann aus dem Eingabefeld der eingegebene Wert (als String) ausgelesen werden.</p>

<p>Dieser Wert wird nun mit 100 multipliziert. In Javascript ist dabei keine explizite Typ-Umwandlung von String zu Zahl nötig, das erledigt der Javascript-Compiler automatisch. Das Ergebnis auf der rechten Seite ist also eine Zahl, z.B. 300.</p>

<p>Auf der linken Seite der Zuweisung wird zuerst mit document.getElementById(‘out’) ein bestimmter HTML-Tag ausgewählt, hier ist es der span-Tag. Diesem Tag wird dann als „inneres HTML“ das Ergebnis der Multiplikation zugewisen. Dabei wir die Zahl (z.B. 300) wieder in einen String zurückverwandelt (z.B. “300”).</p>

<p>Nun wäre es natürlich unpraktisch in das onchange-Attribut ein längeres Javascript-Programm zu schreiben. Dafür kann man in Javascript Funktionen definieren, die dann nur noch aufgerufen werden. Z.B. um die Gesamtsumme im Bestellformular zu berechnen ist eine Funktion praktisch:</p>

<head>
<script language="javascript">
function compute() { 	

document.getElementById('outtotal').innerHTML =  	      

        document.getElementById('in1').value * 100 		
      + document.getElementById('in2').value * 200 		
      + document.getElementById('in3').value * 0 		
      + document.getElementById('in4').value * 1000 		
      + document.getElementById('in5').value * 10 		
      + document.getElementById('in6').value * 5 
}
</script>
</head>
<body>
Bei den einzelnen Berechnungen für die einzelnen Bücher wird jeweils zum Schluss compute() aufgerufen.

Achtung: beim „rechnen“ mit Eingabefelder von Javascript tritt häufig folgender Fehler auf: in Javascript werden die Datentypen int, float, char, zwar unterschieden, aber nicht deklariert. Es kann in einer Variable einmal ein String und einmal eine Zahl gespeichert sein:

var a,b,c;

a = 10;

document.write("&lt;br /&gt;wie viel ist 10 plus 20? ");

document.write(a + 20);

a = "zehn";

document.write("&lt;br /&gt;wie viel ist 10 plus 20? ");

document.write(a + 20);

a = "10";

document.write("&lt;br /&gt;wie viel ist 10 plus 20? ");

document.write(a + 20);

Hier der Output des Programms:

wie viel ist 10 plus 20? 30

wie viel ist 10 plus 20? zehn20

wie viel ist 10 plus 20? 1020

Der + Operator verhält sich also je nach Datentype des ersten Arguments verschieden: steht links des Plus-Zeichens eine Zahl, dann erfolgt eine Addition. Steht links des Plus-Zeichens ein String, dann erfolgt eine String-Konkatenation; ein Aneinanderfügen von Text.

Eingabefelder in Web-Formularen liefern immer einen String. Deswegen ist es falsch, sie einfach zu addieren. 100 + 200 + 0 + 0 + 0 + 0 wäre 1002000000. Bei der Multiplikation mit * tritt dieses Problem nicht auf, da der Stern keine zweite Bedeutung hat. 

Mit der Funktion parseInt() können Sie einen String in eine Integer-Zahl verwandeln bevor Sie eine Addition durchführen.

a = "10";

document.write("&lt;br /&gt;wie viel ist 10 plus 20? ");

document.write(parseInt(a) + 20);

gibt das erwartete ergebnis

wie viel ist 10 plus 20? 30


Formular prüfen
-----------------
Mit Javascript kann man schon vor dem Absenden des Formulares prüfen ob wichtige Daten eingegeben wurden, und das Einsenden des Formulares verhindern falls dem nicht so ist. 

Dafür gibt es das Event „onsubmit“ im form-Tag. 

<form name="pizzaformular" action="http://webwelt.horus.at/html/form/echo.cgi" onsubmit="wert=formularok(); return wert;">
Die Besonderheit dieses Events: wenn am Ende des Events ein falscher-Wert zurück gegeben wird, verhindert der Browser das Senden der Formulardaten. Entsprechend kann man eine Funktion schreiben:

<script>
      function formularok() {
	    var ok, fehler;
	    ok = true;
		fehler = "";
		
		if ( document.getElementById('liefername').value == "" ) {
		    fehler += "Sie müssen den Empfänger angeben\n";
			ok = false;
		}
		if ( document.getElementById('adresse')..value == "" ) {
		    fehler += "Sie müssen eine Lieferadresse angeben\n";
			ok = false;
		}		
		
		// weitere Überprüfungen

		
	    if ( ok ) {
			return true;
		} else {
			alert("Das Formular ist nicht ok:\n"  + fehler );
			return false;
		}
	}
</script>


<body>

<form name="pizzaformular" action="http://webwelt.horus.at/html/form/echo.cgi" onsubmit="wert=formularok(); return wert;">

Empfänger: &lt;input type="text" name="liefername" id="liefername" /&gt; &lt;br /&gt;

Adresse: &lt;input type="text" name="adresse" id="adresse" /&gt; in 5020 Salzburg&lt;br /&gt;

Telefon/Handy: &lt;input type="text" name="tel" id="tel" /&gt; in 5020 Salzburg&lt;br /&gt;


<input name="" type="submit" />
</form>
</body></form></body>

		
			<div class="pagination">
  <ul>
    
      <li><a href="/formulare/18/">← <span class="article">Formular und PHP</a></li>
    
    
      <li><a href="/javascript-dom/">Javascript und das Document Object Model (DOM) →</a></li>
    
  </ul>
</div>

		</div>
		
		<!-- sidebar -->
<div id="sidebar" class="span3 offset1">
        <div class="page-header"> 
        <h2>Kapitel</h2>
        </div>

        
        <ul class="nav nav-list">
        
          
            <li ><a href="/das-web-und-html">DAS WEB UND HTML</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/das-web-und-html/geschichte/">Eine Kurze Geschichte des World Wide Web</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/standards/">Drei Standards definieren das Web</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/html-grundkurs/">HTML Grundkurs</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/upload/">Upload und Tools</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/css">CSS</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/css/css-kurz/">Kurzvorstellung von Stylesheets</a></li>
                      
                    
                      
                      <li ><a href="/css/css/">Geschichte der Cascading Style Sheets</a></li>
                      
                    
                      
                      <li ><a href="/css/graceful/">Graceful Degradation</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/css-layout">CSS LAYOUT</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/css-layout/rahmenbedingungen/">Rahmenbedingungen für Layout</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/layout/">CSS für Layout</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/selektoren/">CSS Selektoren</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/urls">URLS</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/urls/absolut-relativ/">Absolute und relative URLs</a></li>
                      
                    
                      
                      <li ><a href="/urls/konfiguration/">Konfiguration</a></li>
                      
                    
                      
                      <li ><a href="/urls/tipps/">Pragmatische Tipps</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li class="active"><a href="/formulare">FORMULARE</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/formulare/16/">Formulare</a></li>
                      
                    
                      
                      <li ><a href="/formulare/17/">Daten absenden</a></li>
                      
                    
                      
                      <li ><a href="/formulare/18/">Formular und PHP</a></li>
                      
                    
                      
                      <li class="active"><a href="/formulare/19/">Formular und Javascript</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/javascript-dom">JAVASCRIPT DOM</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/javascript-dom/20/">Hintergründe</a></li>
                      
                    
                      
                      <li ><a href="/javascript-dom/21/">Basic Javascript</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/jquery">JQUERY</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/jquery/22/">Unobstrusive Javascript</a></li>
                      
                    
                      
                      <li ><a href="/jquery/23/">Besondere Javascript-Schreibwesen in jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/24/">Selektieren und Manipulieren mit jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/25/">Interaktion mit jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/26/">Formulardaten Prüfen mit jQuery</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/php-vorbereitung">PHP VORBEREITUNG</a>
              <ul class="sub">
                
                  
                
              </ul>
            </li>
          
            <li ><a href="/http">HTTP</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/http/tcpip-und-dns/">TCP/IP und DNS</a></li>
                      
                    
                      
                      <li ><a href="/http/http/">HTTP</a></li>
                      
                    
                      
                      <li ><a href="/http/php-erzeugt/">PHP erzeugt nicht nur HTML</a></li>
                      
                    
                      
                      <li ><a href="/http/php-und-parameter/">In PHP Daten aus Web-Formularen verarbeiten</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/git">GIT</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/git/versionskontrolle/">Versionskontrolle</a></li>
                      
                    
                      
                      <li ><a href="/git/basic-git/">Einfacher Arbeitsablauf in Git</a></li>
                      
                    
                      
                      <li ><a href="/git/git-status/">Status von Git abfragen</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
        
        </ul>

</div>
<!-- sidebar -->

		
	</article>
	<!-- /body -->


  <div class="row">
    <div class="span12" id="legal">
        <p class="copyright">veröffentlicht unter <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/at/deed.de">creative commons by-nc-sa</a> im Jahr 2012 von <a href="#">Brigitte Jellinek</a>.
        <p>Zum Weiterentwickeln dieser Seite: <a href="https://github.com/bjelline/web-development-textbook/fork_select">Projekt forken</a> oder <a href="https://github.com/bjelline/web-development-textbook/blame/master/content/formulare/19.md">kommentar zu dieser seite</a></p>

</p>
    </div>
  </div>

</div> <!-- class="container" -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>!window.jQuery && document.write(unescape('%3Cscript src="/assets/js/libs/jquery-1.6.4.min.js"%3E%3C/script%3E'))</script>
<script>
  $(document).ready(function(){
    $('ul.nav ul.sub').hide();
    $('ul.nav li.active ul.sub').show();
  });
</script>
</body> 
</html>

