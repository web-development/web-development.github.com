<!DOCTYPE html> 
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 web-development"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7 web-development"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8 web-development"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9 web-development"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js web-development"> <!--<![endif]-->
<head> 

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Lehrbuch Web-Development - Basic Javascript</title>
   
  <meta name="author" content="Brigitte Jellinek"> 
  <meta name="description" content="Ein Lehrbuch für das Informatik- oder Medieninformatik-Studium."> 

  <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
  <meta name="generator" content="nanoc 3.1.6">

  <link rel="shortcut icon" href="/assets/img/favicon.ico">

  <link rel="stylesheet" href="/assets/css/bootstrap.css?v=1">
  <link rel="stylesheet" href="/assets/css/prettify.css?v=1">
  <style>
    body {  padding-top: 90px; }
    article {  padding-top: 40px; }
    body, p, li, dt, dd {  
      font-size: 15px; 
      line-height: 1.5 ;
    }
  </style>

  <script src="/assets/js/jquery.js?v=1.7.1"></script>
  <script src="/assets/js/bootstrap.js?v=1"></script>
  <script src="/assets/js/prettify.js?v=1"></script>
  <script src="/assets/js/libs/modernizr-1.5.min.js?v=1"></script>

</head>
<body>

<a href="http://github.com/bjelline/web-development-textbook/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/30f550e0d38ceb6ef5b81500c64d970b7fb0f028/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub"></a>
<div class="container">

  <header class="jumbotron sub-header">
      <h1><a href="/" title="Web Development">Web Development</a></h1>
      <p class="lead">Ein Lehrbuch für das Informatik oder Medien-Informatik Studium.</p>
  </header>
    



	<!-- body -->
	<article id="body" class="row">
		
		<div class="span8">
		
			
                          <div class="page-header">
				<h2 class="title">Basic Javascript</h2>
                          </div>
			
			
			<p>Ein vollständiges Beispiel für eine Webseite mit Javascript-Programm:</p>

<div class="example">
<h4 class="caption">Html Code <small>Vollständige Webseite mit Javascript</small></h4>
<pre class="lang-html prettyprint linenums">
&lt;head&gt;
&lt;script&gt;
function setcolor( c ) {
        b = document.getElementById('farbfeld');
        b.style.backgroundColor = c
}
&lt;/script&gt;
&lt;body id=&quot;farbfeld&quot;&gt;
&lt;h1&gt;Farbwahl&lt;/h1&gt;
&lt;form&gt;
    &lt;input type=&quot;button&quot; value=&quot;Rot&quot;  onclick=&quot;setcolor('red')&quot; /&gt;
    &lt;input type=&quot;button&quot; value=&quot;Grün&quot; onclick=&quot;setcolor('#0F0')&quot; /&gt;
    &lt;input type=&quot;button&quot; value=&quot;Blau&quot; onclick=&quot;setcolor('blue')&quot; /&gt;
&lt;/form&gt;
&lt;/body&gt;
</pre></div>

<p>In dieser Webseite ist an vier Stellen Javascript zu finden. Im <code>script</code> Tag im Head, und dreimal in einem Attribut des <code>input</code>-Tags. Wie Sie sehen ist Javascript sehr eng mit HTML und CSS verzahnt. </p>

<p>Wer ein bestehende Website warten oder verändern will muss mindestens den bestehenden Javascript-Code erkennen können, um ihn nicht zu beschädigen. D.h. auch Leute die nur Design und keine Programmierung machen brauchen ein Grundverständnis von Javascript.</p>

<p>Es ist also erst einmal zu klären wie Javascript in HTML eingebunden wird. </p>

<h2 id="einbindung-von-javascript">Einbindung von Javascript</h2>

<h3 id="externe-javascript-datei">Externe Javascript-Datei</h3>

<p>Man kann Javascript-Programme in eigenen Dateien speichern, diese haben traditionell die Endung .js. Wir werden später eine Javascript-Library namens jQuery verwendet. Mit dem <code>script</code>-Tag im Head des Dokuments wird die externe Javascript-Datei eingebunden: </p>

<pre><code>&lt;script src="jquery.js" type="text/javascript"&gt;&lt;/script&gt;
</code></pre>

<p>Wird der <code>script</code>-Tag auf diese Weise (mit dem Attribut src) verwendet, dann darf er keinen Inhalt zwischen <code>&lt;script&gt;</code> und <code>&lt;/script&gt;</code> enthalten. Achtung: die Schreibweise ohne Ende-Tag: <code>&lt;script src="jquery"&gt;</code> ist nicht erlaubt!</p>

<h3 id="der-ltscript-tag">Der &lt;script&gt;-Tag</h3>
<p>Javascript-Programme können im HTML-Code mit dem <code>script</code>-Tag eingebettet werden. Das Programm wird dann beim Aufbau der Seite ausgeführt:</p>

<pre><code>  &lt;h1&gt;Selbstzerstörung&lt;/h1&gt;
  &lt;script&gt;
      i=10;
      while (i&gt;0) {
          document.write("&lt;br&gt;in " + i + " Millisekunden");
          i--;
      }
  &lt;/script&gt;
  &lt;p&gt;&lt;strong&gt;Peng!&lt;/strong&gt;
</code></pre>

<p>Dieses Programm ist übrigens ein gutes Beispiel für ein veraltetes Javascript-Programm. Die Methode <code>document.write()</code>, der hier für die Ausgabe verwendet wird, wurde durch das DOM größteteils ersetzt. Nur sehr wenige Leute müssen bei sehr wenigen Gelegenheiten noch <code>document.write()</code> verwenden - z.B. die AutorInnen der Javascript-Libaries wie John Resig von jQuery.</p>

<h3 id="javascript-in-einer-url">Javascript in einer URL</h3>

<p>Als URL kann man auch ein kleines Javascript-Programm angeben, z. B. bei einem Link:</p>

<pre><code>  &lt;a href="javascript:location='http://www.google.at/'"&gt;zu Google nur mit Javascript&lt;/a&gt;
</code></pre>

<p>Die “Javascript-in-einer-URL”- Schreibweise ist in HTML-Seiten nicht sehr sinnvoll, da sie für Browser ohne Javascript-Fähigkeit die Links unbrauchbar macht.  </p>

<p>Hier eine Version die dem Prinzip der „graceful degradation“ entspricht. Sie funktioniert mit und ohne Javascript sinnvoll:</p>

<pre><code>  &lt;a href="http://www.google.at" onclick="ok=confirm('go?'); return ok;"&gt;google&lt;/a&gt;
</code></pre>

<p>Ohne Javascript ist es ein ganz normaler Link zu google.</p>

<p>Mit Javascript erscheint ein Dialog, je nach Antwort wird der Link entweder aufgerufen oder nicht. Das funktioniert gleich wie beim onsubmit-Attribut des form-Tags: Wenn der Event-Handler <code>false</code> zurückgibt wird das Event unterbrochen.</p>

<h2 id="die-onevent---attribute">Die onevent - Attribute</h2>

<p>Meist werden Javascript-Programme so geschrieben, dass sie nicht gleich beim Laden der Seite starten, sondern erst wenn gewisse Ereignisse (Events) eintreten (siehe Kapitel 4.5.5, Seite 82)</p>

<p>Ein paar typische Events mit ihren typischen HTML-Tags:</p>

<pre><code>  &lt;body onload="..."&gt;
</code></pre>

<p>Das Programm wird ausgeführt, nachdem die ganze Seite geladen und fertig dargestellt ist</p>

<pre><code>  &lt;a href="..." onmouseover="..."&gt;
</code></pre>

<p>Das Programm wird ausgeführt wenn die Maus über den Link bewegt wird (auch: onmouseout). (Achtung: funktioniert nicht auf Touch-Devices – so wie :hover)</p>

<pre><code>  &lt;input type="button" onclick="..."&gt;
</code></pre>

<p>Das Programm wird ausgeführt wenn auf den Button geklickt wird. Das Programm muß <code>true</code> oder <code>false</code> zurückgeben um anzuzeigen ob die normale Funktion des Buttons wirklich ausgeführt werden soll. </p>

<pre><code>  &lt;form onsubmit="..."&gt;
</code></pre>

<p>Das Programm wird ausgeführt wenn der Einsende-Knopf des Formulars betätigt wird, aber bevor die Daten wirklich gesendet werden. Falls der Javascript-Code false zurückgibt werden die Daten aber nicht versandt! </p>

<pre><code>  &lt;a href="..." onclick="..."&gt;
</code></pre>

<p>Das Programm wird ausgeführt wenn der Link angeklickt wird. Falls der Javascript-Code false zurückgibt wird der Link aber nicht aktiviert!</p>

<pre><code>  &lt;input onchange="..."&gt;
</code></pre>

<p>Das Programm wird ausgeführt wenn der Inhalt des Eingabefeldes verändert wurde</p>

<h2 id="syntax-von-javascript">Syntax von Javascript</h2>

<p>Javascript hat eine ähnliche Schreibweise wie die Sprachen aus der C-Familie (C, C++, Java, Perl, PHP): Anweisung wird mit einem Strichpunkt (Semikolon) getrennt, Blöcke werden mit geschwungenen Klammern gebildet. </p>

<p>Javascript ist eine objektorientierte Programmiersprache. Was bedeutet objektorientierung? Die Grundidee ist, dass ein Objekt nicht nur eine Variable ist, die Daten speichert, sondern zusätzlich auch noch Funktionen existieren können, die zu diesem Objekt gehören.</p>

<p>Zum Beispiel das Objekt <code>document</code> ist bei Javascript im Browser immer vorhanden. Es repräsentiert die aktuell geladene Webseite. Dieses Dokument hat einige Eigenschaften (Variablen) und einige Methoden (Funktionen):</p>

<div class="example">
<pre class="lang-javascript prettyprint linenums">
      // document.location          // diese Eigenschaft speichert die aktuelle URL
      document.location = &quot;http://io9.com&quot;;  
           // wenn man einen neuen Wert in location speichert surft der Browser hin

      document.alert(&quot;hi&quot;);  // die Methode alert zeigt ein Popup-Fenster an

      document.alert(&quot;meine URL ist &quot; + document.location);
</pre></div>

<p>Es gibt in Javascript aber auch „normale“ Variablen und Funktionen, nicht nur Objekte, Eigenschaften und Methoden. Folgendes Beispiel verwendet die Methode <code>getElementById</code> des <code>document</code>-Objekts um ein bestimmtes <code>div</code> in der Webseite auszuwählen. </p>

<p><img  alt="Abbildung 57: Javascript-Beispiel in FireBug auf der Website http://everytimezone.com/" src="/images/image254.png" /></p>

<p>In andere Programmiersprachen müssen Variablen deklariert werden (ein Datentyp für die Variable wird festgelegt) und initialisiert werden (ein erster Wert wird in die Variable gespeichert). In Javascript ist die Deklaration nicht nötig. Wenn eine Variable zum ersten Mal im Programm erwähnt wird, wird sie vom Interpreter angelegt. </p>

<p>Auch die folgenden Beispiele können Sie direkt in Firebug in der Console ausprobieren wie in der Abbildung gezeigt: Wenn Sie einen Ausdruck eintippen wird er ausgewertet, mit dem Befehl console.log( … ) können Sie direkt auf die Console schreiben. </p>

<p><img  alt="Abbildung 58: Javascript Console in Firebug" src="/images/image264.png" /></p>

<p>Variablen in Javascript können Zahlen, Strings, Arrays, Objekte enthalten – der Interpreter trennt Variablen nicht nach verschiedenen Datentypen:</p>

<pre><code>  a = 10;               // typeof(a) == "number"
  a = 3.141;           // typeof(a) == "number"
  a = "ein text";     // typeof(a) == "string"
  a = true;          // typeof(a) == "boolean"
  a = undefined;    // typeof(a) == "undefined"
</code></pre>

<h3 id="arrays">Arrays</h3>

<p>Arrays in Javascript können wie in C mit eckigen Klammern und Integer-Index ausgelesen werden: <code>b[0]</code>, <code>b[1]</code>, …  Aber eigentlich sind Arrays schon Objekte. </p>

<p>Für das Erzeugen des Arrays gibt es zwei Schreibweisen</p>

<pre><code>  var b;
  b = ["eins", 2, 3.141, true];           // JSON-Schreibweise
  b = new Array("eins", 2, 3.141, true);  // Objekt-Schreibweise  
            // typeof(b) == "object"
</code></pre>

<p>Die Werte im Array können verschiedene Daten haben (String, Number, Boolean,…). Die Größe des Arrays ist nicht beschränkt, die aktuelle Länge des Arrays kann aus der Eigenschaft .length ausgelesen werden.</p>

<pre><code>  var i,t;
  i = 0;
  t = "Das Array:\n";
  while( i &lt; b.length ) {
      t += "Index = " + i + ", Wert = " + b[i] + "\n";
      i++;
  }   
  alert(t);
</code></pre>

<h3 id="objekte">Objekte</h3>

<p>Für das Erzeugen von Objekten gibt es zwei Schreibweisen: die JSON-Schreibweise mit geschwungenen Klammern eignet sich gut für einmalige Objekte. Will man mehrere Objekte mit denselben Eigenschaften erzeugen, dann ist eine Instanziierungs-Funktion besser geeignet.</p>

<pre><code>  var c;
  c = {"farbe" : "rot", "beschriftung": "int pi == 3", "verkauft": true};  

  function Shirt( f, b, v ) {
      this.farbe        = f;
      this.beschriftung = b;
      this.verkauft     = v;
  }
  c = new Shirt("rot", "int pi == 3", true);

  alert("Das Shirt ist " + c.farbe ); // gibt “Das Shirt ist rot”
</code></pre>

<p>Eine Besonderheit von Javascript (die sie nicht in anderen Programmiersprachen finden werden) ist, dass Eigenschaften eines Objekts nicht nur über die Punkt-Schreibweise, sondern auch über eckige Klammern – also wie ein Array – angesprochen werden können:</p>

<pre><code>  alert("Das Shirt ist " + c.farbe ); 
  alert("Das Shirt ist " + c["farbe"] );
</code></pre>

<p>In den eckigen Klammern steht nun ein String. Dieser könnte auch in einer Variable gespeichert sein:</p>

<pre><code>  e = "beschriftung";
  alert("Die Beschriftung lautet " + c[e] );
</code></pre>

<p>Mit dieser Schreibweise und der for-Schleife kann man über alle Eigenschaften eines Objektes iterieren:</p>

<pre><code>  var i,t;
  t = "Das Objekt:\n";
  for( i in c ) {
      t += "Eigenschaft = " + i + ", Wert = " + c[i] + "\n";
  }   
  alert(t);
</code></pre>

<h2 id="lesen-aus-dem-dom">Lesen aus dem DOM</h2>
<p>Die wichstigsten Befehle zur Manipulation des DOM finden Sie in selfhtml unter „document“ und „node“. Ein Node ist ein Knoten DOM-Baum, entspricht also einem HTML-Tag oder einem Stück Text. Die Attribute des HTML-Tags sind über getAttribute / setAttribute / … zugänglich und manipulierbar.</p>

<p>Hier eine Liste der wichtigen Objekte, Methoden, Eigenschaften für die DOM:</p>

<pre><code>  document.getElementById() 
  document.getElementsByTagName() 
  document.createElement()
  document.querySelectorAll()   (liefert Array)
  document.querySelector()      (liefert 1 Node)

  node.parentNode   (liefert 1 Node)
  node.childNodes   (liefert Array von Nodes)
  node.firstChild
  node.lastChild
  node.previousSibling
  node.nextSibling
  node.data
  node.attributes
  node.innerHTML


  node.getElementById() 
  node.getElementsByTagName() 
  node.getElementsByClassName() 

  node.appendChild()
  node.cloneNode()
  node.getAttribute()
  node.setAttribute()
  node.hasChildNodes()
  node.insertBefore()
  node.removeAttribute()
  node.removeChild()
  node.replaceChild()
</code></pre>

<p>Ein simples Beispiel: ein bestimmter Tag wird über die ID ausgewählt und sein Style-Attribut gesetzt:</p>

<pre><code>  d = document.getElementById("person_25“);
  d.setAttribute("style", "display:none");
</code></pre>

<p>Diese beiden Zeilen könnten auch zu einer kombiniert werden:</p>

<pre><code>document.getElementById("person_25“).setAttribute("style", "display:none");
</code></pre>

<p>Achtung: Falls der Tag schon ein Style-Attribute hatte wurde dieses überschrieben.  Der Wert des Attributes ist ein einfacher String.</p>

<p>Man kann CSS-Selektoren verwenden um Element auszuwählen, und zwar mit der Methode <code>document.querySelectorAll()</code>:</p>

<pre><code>inputs = document.querySelectorAll("input");

i=0;

while(i &amp;lt; inputs.length) {

    console.log("input mit name " + inputs[i].name );
    i++;
}
</code></pre>

<p>Den eigentlichen Text der HTML-Seite kann man als data eines Text-Nodes auslesen.</p>

<pre><code>  &lt;span id="v_25" class="vorname"&gt;Benjamin&lt;/span&gt;
</code></pre>

<p>Das erste und einzige Kind des Span ist ein Text-Node:</p>

<pre><code>  vn = document.getElementById("v_25").firstChild.data;
</code></pre>

<p>oder – etwas kürzer – über die Eigenschaft textContent:</p>

<pre><code>  vn = document.getElementById("v_25").textContent;
</code></pre>

<p>textContent funktioniert auch bei Nodes die noch weitere verschachtelte Tags enthalten und extrahiert immer den gesamten Text aus allen “Blättern” des DOM-Baums.</p>

<h2 id="manipulation-des-dom">Manipulation des DOM</h2>
<p>Noch einmal die Liste der wichtigen Objekte, Methoden, Eigenschaften. Die fett gedruckent Methoden sind für die Veränderung des DOM wichtig:</p>

<pre><code>  document.getElementById() 
  document.getElementsByTagName() 
  document.createElement()
  document.querySelectorAll()   (liefert Array)
  document.querySelector()      (liefert 1 Node)

  node.parentNode   (liefert 1 Node)
  node.childNodes   (liefert Array von Nodes)
  node.firstChild
  node.lastChild
  node.previousSibling
  node.nextSibling
  node.data
  node.attributes
  node.innerHTML


  node.getElementById() 
  node.getElementsByTagName() 
  node.getElementsByClassName() 

  node.appendChild()
  node.cloneNode()
  node.getAttribute()
  node.setAttribute()
  node.hasChildNodes()
  node.insertBefore()
  node.removeAttribute()
  node.removeChild()
  node.replaceChild()
</code></pre>

<p>Das Einfügen eines ganz neuen Elements in die Webseite ist am einfachsten mit der Eigenschaft innerHTML:</p>

<pre><code>document.querySelector("body").innerHTML = "&lt;p&gt;Alles &lt;b&gt;ganz&lt;/b&gt; neu&lt;/p&gt;“;
</code></pre>

<p>Mit cloneNode kann man einen ganzen Teil-Baum duplizieren, und wo anders wieder einfügen. So kann man z.B. in einem Pizza-Bestell-Formular die Eingabeelement für eine Pizza in einer div zusammenfassen:</p>

<pre><code>  &lt;div class="pizza"&gt;
    &lt;p&gt;
      &lt;select name="pizzatype[]"&gt;
        &lt;option&gt;Magaritha&lt;/option&gt;
        &lt;option&gt;Vegetarian&lt;/option&gt;
        &lt;option&gt;Quattro Staggione&lt;/option&gt;
      &lt;/select&gt;
      &lt;br /&gt;
      &lt;label&gt;add Garlic  &lt;select name="addgarlic[]"&gt;
          &lt;option&gt;no&lt;/option&gt;&lt;option&gt;yes&lt;/option&gt;
      &lt;/select&gt;&lt;/label&gt;
      &lt;label&gt;add Cheese &lt;select name="addcheese[]"&gt;
          &lt;option&gt;no&lt;/option&gt;&lt;option&gt;yes&lt;/option&gt;
      &lt;/select&gt;&lt;/label&gt;
      &lt;label&gt;anything else?&lt;input type="text" name="comment[]"  /&gt;&lt;/label&gt;
    &lt;/p&gt;
  &lt;/div&gt;
</code></pre>

<p>Dieses div kann man dann clonen, falls man mehrere Pizzen braucht:</p>

<pre><code>  var first_pizza = document.querySelector("div.pizza");
  var new_pizza = first_pizza.cloneNode(true);
  first_pizza.insertBefore(new_pizza, null);
</code></pre>

<h2 id="einfgen-von-event-handlern">Einfügen von Event Handlern</h2>
<p>Wir haben im Kapitel 4.5.5 schon gesehen, wie Event-Handler direkt im HTML definiert werden können:</p>

<pre><code>&lt;input value="0" name="in"  onchange="hier Javascript"&gt;
</code></pre>

<p>Mit der Methode addEventListener kann das auch von Javascript aus erfolgen. Hier wieder am Beispiel des Pizza-Bestellformulars: mit einem kleinen „x“ in der rechten obere Ecke soll man eine Pizza löschen können.</p>

<p><img  alt="Abbildung 59: Pizza löschen mit Klick auf das x in der rechten oberen Ecke" src="/images/image265.png" /></p>

<p>Im HTML-Code fügen wir dafür einen span-Tag ein:</p>

<pre><code>  &lt;div class="pizza"&gt;
    &lt;p&gt;
      &lt;span class="removethis"&gt;x&lt;/span&gt;
      &lt;select name="pizzatype[]"&gt;…&lt;/select&gt;
      …
    &lt;/p&gt;
  &lt;/div&gt;
</code></pre>

<p>Im Javascript-Code können wir nun das Event an den span-Tag binden. Dafür müssen wir erst eine Funktion definieren, die aufgerufen werden soll, hier heisst die funktion removeMe. Mit addEventListener können wir dann die Funktion als zuständig für das click-event am span.removthis definieren.</p>

<pre><code>  function removeMe(e){
     var me = e.target;
     var my_pizza = me.parentNode.parentNode;
     my_pizza.parentNode.removeChild( my_pizza ); 
  }
  document.querySelector(".removethis").addEventListener("click", removeMe, false); 
</code></pre>

<h2 id="zeichnen-im-canvas">Zeichnen im Canvas</h2>
<p>Der Canvas-Tag stellt eine rechteckige Zeichenfläche zur Verfügung. Es handelt sich dabei um eine Matrix von Pixeln, siehe SVG für Vektor-Grafik.</p>

<p>Der Canvas wird durch zwei Objekte in Javascript repräsentiert: ein Canvas-Objekt und ein Context-Objekt. Zuerste müssen wir diese beiden Objekte finden und in Variablen speichern:</p>

<pre><code>  var my_canvas = document.getElementById("c");
  var my_context = my_canvas.getContext("2d");
</code></pre>

<p>Wir verwenden erst einmal die 2-dimensionale Zeichenfläche. Wenn Sie dann mehr von Computergrafik verstehen, können Sie auch die 3d-Version, genannt „webgl“ verwenden.</p>

<p>Achsenparallelle Rechtecke zeichnet man mit fillRect:</p>

<pre><code>  my_context.fillRect(50, 50, 20, 20);
</code></pre>

<p>Linien ziehen kann man mit moveTo und lineTo. Die Linie erscheint erst, wenn man die abschließende Stroke-Methode aufruft:</p>

<pre><code>  my_context.moveTo(10, 20);
  my_context.lineTo(10, 50);
  my_context.strokeStyle = "#4a4";
  my_context.stroke();
</code></pre>

<p>Text auf den Canvas schreiben kann man mit dem font-Befehl:</p>

<pre><code>  my_context.font = "bold 12px sans-serif"; 
  my_context.fillText("hier bin ich", 10, 50);
</code></pre>

<p>Bilder die sich bereits in der Webseite befinden kann man in den Canvas kopieren:</p>

<pre><code>  var cat = document.getElementById("cat");   
  my_context.drawImage(cat, 0, 0);
</code></pre>

<p>Oder man kann ganz neue Bilder laden. Achtung: da das laden eines Bildes einige Zeit dauert verwenden wir hier das onload Event: erst wenn das Bild fertig geladen ist wird es in den Canvas kopiert:</p>

<pre><code>  var cat = new Image();   
  cat.src = "images/cat.png";   
  cat.onload = function() {     
    my_context.drawImage(cat, 0, 0);   
  };
</code></pre>

<p>Diese Beispiel zu Canvas stammen alle aus dem <a href="http://diveintohtml5.info/canvas.html">Canvas-Kapitel</a> von Mark Pilgrims „Dive into HTML5“.</p>

		
			<div class="pagination">
  <ul>
    
      <li><a href="/javascript-dom/hintergrund/">← <span class="article">Hintergründe</a></li>
    
    
      <li><a href="/jquery/">jQuery - Einführung →</a></li>
    
  </ul>
</div>

		</div>
		
		<!-- sidebar -->
<div id="sidebar" class="span3 offset1">
        <div class="page-header"> 
        <h2>Kapitel</h2>
        </div>

        
        <ul class="nav nav-list">
        
          
            <li ><a href="/das-web-und-html/">DAS WEB UND HTML</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/das-web-und-html/geschichte/">Eine Kurze Geschichte des World Wide Web</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/standards/">Drei Standards definieren das Web</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/html-grundkurs/">HTML Grundkurs</a></li>
                      
                    
                      
                      <li ><a href="/das-web-und-html/upload/">Upload und Tools</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/css/">CSS</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/css/css-kurz/">Kurzvorstellung von Stylesheets</a></li>
                      
                    
                      
                      <li ><a href="/css/geschichte/">Geschichte von CSS</a></li>
                      
                    
                      
                      <li ><a href="/css/css/">Syntax von CSS</a></li>
                      
                    
                      
                      <li ><a href="/css/graceful/">Graceful Degradation</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/css-layout/">CSS LAYOUT</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/css-layout/rahmenbedingungen/">Rahmenbedingungen für Layout</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/layout/">CSS für Layout</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/navigation/">Navigationsmenü</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/interaktion/">CSS für Interaktion</a></li>
                      
                    
                      
                      <li ><a href="/css-layout/selektoren/">CSS Selektoren im Detail</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/urls/">URLS</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/urls/absolut-relativ/">Absolute und relative URLs</a></li>
                      
                    
                      
                      <li ><a href="/urls/konfiguration/">Konfiguration</a></li>
                      
                    
                      
                      <li ><a href="/urls/tipps/">Pragmatische Tipps</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/formulare/">FORMULARE</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/formulare/form/">Formulare</a></li>
                      
                    
                      
                      <li ><a href="/formulare/interaktion/">Formular als Interaktion</a></li>
                      
                    
                      
                      <li ><a href="/formulare/action/">Daten absenden</a></li>
                      
                    
                      
                      <li ><a href="/formulare/php/">Formular und PHP</a></li>
                      
                    
                      
                      <li ><a href="/formulare/javascript/">Formular und Javascript</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li class="active"><a href="/javascript-dom/">JAVASCRIPT DOM</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/javascript-dom/hintergrund/">Hintergründe</a></li>
                      
                    
                      
                      <li class="active"><a href="/javascript-dom/basic-javascript/">Basic Javascript</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/jquery/">JQUERY</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/jquery/unobstrusive/">Unobstrusive Javascript</a></li>
                      
                    
                      
                      <li ><a href="/jquery/schreibweise/">Besondere Javascript-Schreibwesen in jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/selektieren-manipulieren/">Selektieren und Manipulieren mit jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/interaktion/">Interaktion mit jQuery</a></li>
                      
                    
                      
                      <li ><a href="/jquery/formularpruerung/">Formulardaten Prüfen mit jQuery</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/php-vorbereitung/">PHP VORBEREITUNG</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php-vorbereitung/was-ist-php/">Was ist PHP? Was passiert am Webserver?</a></li>
                      
                    
                      
                      <li ><a href="/php-vorbereitung/apache/">Apache</a></li>
                      
                    
                      
                      <li ><a href="/php-vorbereitung/erstes-php-programm/">Das erste PHP-Programm</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/http/">HTTP</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/http/tcpip-und-dns/">TCP/IP und DNS</a></li>
                      
                    
                      
                      <li ><a href="/http/http/">HTTP</a></li>
                      
                    
                      
                      <li ><a href="/http/php-erzeugt/">PHP erzeugt nicht nur HTML</a></li>
                      
                    
                      
                      <li ><a href="/http/php-und-parameter/">In PHP Daten aus Web-Formularen verarbeiten</a></li>
                      
                    
                      
                      <li ><a href="/http/datei-upload/">Datei Upload</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/git/">GIT</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/git/versionskontrolle/">Versionskontrolle</a></li>
                      
                    
                      
                      <li ><a href="/git/basic-git/">Einfacher Arbeitsablauf in Git</a></li>
                      
                    
                      
                      <li ><a href="/git/git-status/">Status von Git abfragen</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/wordpress/">WORDPRESS</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/wordpress/was-ist-wordpress/">Was ist Wordpress</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/installation/">Kurz-Installation von Wordpress</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/security/">Security</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/backend/">Überblick Backend</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/seiten/">Artikel und Seiten</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/multimedia/">Multimedia-Dateien</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/themes-sidesbars-widgets/">Themes, Sidebars und Widgets verwenden</a></li>
                      
                    
                      
                      <li ><a href="/wordpress/plugins/">Plugins verwenden</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/php/">PHP</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php/syntax/">Syntax von PHP</a></li>
                      
                    
                      
                      <li ><a href="/php/dateien/">Dateien und Ordnern in PHP</a></li>
                      
                    
                      
                      <li ><a href="/php/mail/">PHP und E-Mail</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/php-mysql/">PHP MYSQL</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php-mysql/start/">Start mit PHP und MySQL</a></li>
                      
                    
                      
                      <li ><a href="/php-mysql/datenbank-lesen/">Eine lesende Web-Applikation</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/session/">SESSION</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/session/session-und-login/">Session und Login</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/php-mysql-2/">PHP MYSQL 2</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/php-mysql-2/datenbank-schreiben/">Web-Applikation mit Schreibrecht</a></li>
                      
                    
                      
                      <li ><a href="/php-mysql-2/daten-loeschen/">Löschen</a></li>
                      
                    
                      
                      <li ><a href="/php-mysql-2/daten-einfuegen/">Einfügen</a></li>
                      
                    
                      
                      <li ><a href="/php-mysql-2/daten-editieren/">Daten Bearbeiten</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
            <li ><a href="/svg/">SVG</a>
              <ul class="sub">
                
                  
                    
                      
                    
                      
                      <li ><a href="/svg/was-ist-svg/">Was ist SVG</a></li>
                      
                    
                      
                      <li ><a href="/svg/formen/">Grundformen in SVG</a></li>
                      
                    
                      
                      <li ><a href="/svg/koordinaten/">Koordinaten und Transformationen</a></li>
                      
                    
                      
                      <li ><a href="/svg/js-svg/">Javascript und SVG</a></li>
                      
                    
                  
                
              </ul>
            </li>
          
        
        </ul>

</div>
<!-- sidebar -->

		
	</article>
	<!-- /body -->


  <div class="row">
    <div class="span12" id="legal">
        <p class="copyright">veröffentlicht unter <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/at/deed.de">creative commons by-nc-sa</a> im Jahr 2012 von <a href="#">Brigitte Jellinek</a>.
        <p>Zum Weiterentwickeln dieser Seite: <a href="https://github.com/bjelline/web-development-textbook/fork_select">Projekt forken</a> oder <a href="https://github.com/bjelline/web-development-textbook/blob/master/content/javascript-dom/basic-javascript.md">kommentar zu dieser seite</a></p>

</p>
    </div>
  </div>

</div> <!-- class="container" -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>!window.jQuery && document.write(unescape('%3Cscript src="/assets/js/libs/jquery-1.6.4.min.js"%3E%3C/script%3E'))</script>
<script>
  $(document).ready(function(){
    function save_state(){
      var stored = "";
      $('ul.nav > li').each(function(i,e){
        if( $(e).find("i").attr('class') == 'icon-plus' ) {
          stored += "-";
        }  else {
          stored += "+";
        }
      });
      localStorage.setItem('nav-state', stored);
    }
    $('ul.nav > li > a').prepend("<i class='icon-plus'></i>");

    // init state
    var stored = localStorage.getItem('nav-state');
    if ( stored ) {
      var data = stored.split("");
      $('ul.nav > li').each(function(i,e){
        if( data[i] == "+" ) {
          $(e).find(">ul").show();
          $(e).find("i").removeClass('icon-plus').addClass('icon-minus');
        } else {
          $(e).find(">ul").hide();
        }
      });
    } else {
      $('ul.nav ul.sub').hide();
    }
    $('ul.nav li.active ul.sub').show();
    $('ul.nav li.active i').removeClass('icon-plus').addClass('icon-minus');

    $('ul.nav i').click(function(){
      $this = $(this); 
      $this.toggleClass('icon-plus').toggleClass('icon-minus');
      $this.parent().next('ul').toggle();
      save_state();
      return false;
    });
  });
</script>
</body> 
</html>

